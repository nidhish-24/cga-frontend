<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Application | Career Guidance Academy</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
    
<nav class="navbar navbar-dark bg-dark px-3">
  <a class="navbar-brand fw-bold" href="#" style="margin-left:5px;">Career Guidance Academy</a>
  <a class="btn btn-outline-light" href="index.html">Back to Home</a>
</nav>

<div class="container mt-5 p-4 bg-white shadow rounded" style="max-width:600px;">
  <h2 class="text-center mb-4">Student Application Form</h2>
    
  <form id="applyForm">

  <!-- Email & Mobile -->
  <div class="row mb-3">
    <div class="col-md-6">
      <label class="form-label">Email</label>
      <input type="email" id="email" class="form-control" placeholder="Enter your email" required>
    </div>
    <div class="col-md-6">
      <label class="form-label">Mobile Number</label>
      <input type="tel" id="phone" class="form-control" placeholder="Enter mobile number" maxlength="10" required>
    </div>
  </div>

  <!-- 12th Marks & Cutoff -->
  <div class="row mb-3">
    <div class="col-md-6">
      <label class="form-label">+12 Total Marks</label>
      <input type="number" id="marks" class="form-control" placeholder="Enter total marks (e.g., 565)" required>
    </div>
    <div class="col-md-6">
      <label class="form-label">Cutoff Marks</label>
      <input type="number" id="cutoff" class="form-control" placeholder="Enter cutoff mark (e.g., 198.50)" required>
    </div>
  </div>

  <!-- Community -->
  <div class="mb-3">
    <label class="form-label">Community</label>
    <select id="community" class="form-control" required>
      <option value="">Select Community</option>
      <option>BC</option>
      <option>MBC</option>
      <option>SC</option>
      <option>ST</option>
      <option>OC</option>
    </select>
  </div>

  <!-- Group -->
  <div class="mb-3">
    <label class="form-label">+12 Group</label>
    <select id="group" class="form-control" required>
      <option value="">Select Group</option>
      <option>Biology</option>
      <option>Computer Science</option>
      <option>Arts</option>
      <option>Commerce</option>
      <option>Vocational</option>
    </select>
  </div>

  <!-- School Studied -->
  <div class="mb-3">
    <label class="form-label">School Studied</label>
    <input type="text" id="school" class="form-control" placeholder="Enter school name" required>
  </div>

  <!-- Address -->
  <div class="mb-3">
    <label class="form-label">Address</label>
    <input type="text" id="address" class="form-control" placeholder="Enter full address" required>
  </div>

  <!-- Parent Mobile -->
  <div class="mb-3">
    <label class="form-label">Parent's Mobile Number</label>
    <input type="tel" id="parentPhone" class="form-control" placeholder="Enter parent's mobile number" maxlength="10" required>
  </div>

  <!-- Submit -->
  <button type="submit" class="btn btn-primary w-100 mt-3">Submit</button>

</form>
</div>

<script>
document.getElementById("applyForm").addEventListener("submit", async function (e) {
  e.preventDefault();

  const formData = {
    email: document.getElementById("email").value,
    phone: document.getElementById("phone").value,
    marks: document.getElementById("marks").value,
    cutoff: document.getElementById("cutoff").value,
    community: document.getElementById("community").value,
    group: document.getElementById("group").value,
    school: document.getElementById("school").value,
    address: document.getElementById("address").value,
    parentPhone: document.getElementById("parentPhone").value
  };

  try {
    const response = await fetch("https://cga-backend-9iaz.onrender.com/api/apply", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(formData)
    });

    const result = await response.json();

    if (result.success) {
      alert("✅ Application Submitted Successfully!");
      document.getElementById("applyForm").reset();
    } else {
      alert("❌ Error submitting application");
    }
    
  } catch (error) {
    alert("⚠️ Server error");
    console.log(error);
  }
});
</script>

</body>
</html>
